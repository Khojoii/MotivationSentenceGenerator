# Motivational sentence generative AI - FastAPI

**A specialized generative AI system designed to create warm, personalized motivational sentences for mothers, pregnant women, and postpartum individuals.**

---
## Overview

**Maternal Motivation AI** is a generative AI designed to create personalized motivational sentences for mothers and pregnant women.  
By analyzing the user's current situation, challenges, goals, and emotional state, the AI provides:

- **Encouraging messages** tailored to the mother’s life circumstances  
- **Positive future outlooks** such as bonding with the child or achieving personal goals  
- **Gentle, empathetic support** without giving medical advice  

This helps mothers feel motivated, supported, and emotionally prepared for pregnancy, postpartum, or parenting challenges.


---
# How the System Works

There are two input modes:
1. Daily Motivation Input  
2. User Motivation Input (includes emotional_state)

Each mode has:
- Its own Pydantic wrapper  
- Separate upload endpoint  
- Separate generate endpoint  
- Independent validation and output saving  
---
# 1. Upload Input JSON

## A) Daily Motivation Input  
Endpoint:
POST /input_daily

Example JSON: {"user_info": {
    
    "name": "Ava",
    "child_name": "Tom",
    "age": 29,
    "pregnancy_status": "pregnant",
    "pregnancy_week": 27,
    "child_age": null,
    "current_situation": "...",
    "challenges": "...",
    "goals": "...",
    "extra_notes": "..."
  }
}

## B) User Motivation Input (includes emotional_state)
Endpoint:
POST /input_user

Example: {"user_info": {

    "name": "Maya",
    "child_name": "Leo",
    "age": 28,
    "pregnancy_status": "postpartum",
    "child_age": 3,
    "current_situation": "...",
    "challenges": "...",
    "goals": "...",
    "extra_notes": "...",
    "emotional_state": "Sad"
  }
}

---
# 2. Generate the Motivational Sentence

## A) Generate Daily Sentence
GET /generate_daily

## B) Generate User-Specific Sentence
GET /generate

Output:
{
  "motivational_sentence": "..."
}


## API Endpoints

| Method | Endpoint    | Description |
|--------|-------------|-------------|
| POST   | `/input`    | Upload a `.json` file containing user information(includes emotional_state) .Returns status |
| GET    | `/generate` | analyze the uploaded json. Returns JSON with Motivational sentence. |
| POST   | `/input_daily`| Upload a `.json` file user information. Returns status |
| GET    | `/generate_daily`| analyze the uploaded json. Returns JSON with Motivational sentence. |
---
# Technology Stack

- Python 3.11+  
- FastAPI  
- Pydantic v2  
- OpenAI GPT Models  
- Regex utilities  
- Structured Logging  
- Automatic file indexing  
- Rate limiting system  

---

## Project Structure
```
Motivational sentence generator/
│
├── .env                           # Environment variables (API keys, config settings)
├── main.py                        # FastAPI application entry point
├── model.py                       # Core logic for AI communication and text generation
├── prompts.py                     # Prompt templates for motivational sentence generation
├── logger.py                      # Central logging utility with timestamped logs
├── file_indexer.py                # Handles input/output file indexing and file management
├── delay_control.py               # Controls generation delays and rate-limiting
│
├── logs/                          # Automatically generated log files
│   └── log_YYYY-MM-DD_HH-MM-SS.log
│
├── Inputs_Outputs/
│   ├── daily_inputs/              # Daily automated or batch input files
│   ├── daily_outputs/             # Daily output results generated by the system
│   ├── inputs/                    # User-uploaded or manual input JSON files
│   └── outputs/                   # Generated motivational sentence outputs
│
├── routes/
│   └── Endpoints.py               # FastAPI endpoint definitions (/input and /generate)
│
└── validations/
    ├── pydantic_base_class.py     # Base Pydantic models for structure and shared fields
    ├── pydantic_validation.py     # Validation logic for user inputs using Pydantic
    └── text_cleaner.py            # Regex utilities to clean and normalize AI-generated text

```

## How to use 

## 1. Setting up the Project Environment

First, you need to create a **Python virtual environment (venv)** and install all dependencies. Follow these steps:
### 1-1. Navigate to your project folder
```bash
cd path/to/your/project
```
### 1-2. Create a virtual environment (named myenv)
```bash
python -m venv myenv
```
### 1-3. Make sure the requirements.txt file is in the same folder

### 1-4. Activate the virtual environment

> [!IMPORTANT]
> note that every time you want to run the app you should activate the venv

### On Windows:
```bash
. Scripts\activate
```

### On Linux / macOS:
```bash
source myenv/bin/activate
```
### 1-5. Install all dependencies
```bash
pip install -r requirements.txt
```
## 2. Run the app
### in a terminal in your venv, run the app via uvicorn:
```bash
uvicorn yourfilename:app --reload
```
or just simply run the main.py in your IDE
## 3. test the app
You can test your FastAPI app using one of these three methods:

### 3-1. Using `curl` (command line)
Upload a file:
```bash
curl -X POST "http://127.0.0.1:8000/input" -F "file=@yourfile.json"
```
Analyze the uploaded file:
```
curl -X GET "http://127.0.0.1:8000/generate"
```
### 3-2. Using [Postman](https://www.postman.com/)(Recommended)

Open Postman.

To upload a file (/input endpoint):

Select POST method at the top.

Set URL:
```bash
http://127.0.0.1:8000/input
```
- Go to the Body tab and select form-data.

- Add a field named file and set type to File.
 
- Click Select Files and choose your .txt file.

- Click Send.

- The server response will show below (status).

- To analyze the uploaded text (/generate endpoint):

- Open a new tab and select GET method.

Set URL:
```bash
http://127.0.0.1:8000/generate
```

- Click Send.

- Then the result will save to your project Directory

### 3-3. Using Swagger UI

Open your browser and go to:
```bash
http://127.0.0.1:8000/docs
```

- You’ll see the Swagger UI page with all available endpoints.

- Upload a file (/input endpoint):

- Click on POST /input to expand it.

- Click the “Try it out” button (top-right of the endpoint box).

- In the file field, click “Choose File” and select your .txt file.

- Click Execute.

- The response section below will show the status and text length.

- Analyze uploaded text (/generate endpoint):

- Click on GET /generate to expand it.

- Click “Try it out”, then Execute.

## Examples

You can check an example input and output file here:  
[example_input.txt](Inputs_Outputs/inputs/input.json) , [example_output.json](Inputs_Outputs/outputs/output.json)


## Found a Bug?

If you encounter an issue or want to suggest an improvement, please submit it via the **Issues** tab.#
